<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0d0d0d">
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ â€” CRMB</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Cairo',sans-serif;
  background:#0d0d0d;
  min-height:100vh;
  display:flex;align-items:center;justify-content:center;
  padding:20px;
  background-image:
    radial-gradient(ellipse at 20% 20%,#1a1200 0%,transparent 50%),
    radial-gradient(ellipse at 80% 80%,#0a1500 0%,transparent 50%);
}
.card{
  background:#111;border:1px solid #2a2000;
  border-radius:24px;padding:40px 36px;
  width:100%;max-width:400px;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
}
.logo{text-align:center;margin-bottom:32px}
.logo .icon{font-size:52px;display:block;margin-bottom:8px}
.logo h1{color:#D4A843;font-size:26px;font-weight:900;letter-spacing:2px}
.logo p{color:#666;font-size:13px;margin-top:4px}
.field{margin-bottom:18px}
label{display:block;color:#aaa;font-size:13px;margin-bottom:7px;font-weight:600}
input{
  width:100%;background:#1a1a1a;border:1px solid #333;
  border-radius:10px;color:#fff;padding:12px 14px;
  font-size:15px;font-family:'Cairo',sans-serif;outline:none;
  transition:border-color .2s,box-shadow .2s
}
input:focus{border-color:#D4A843;box-shadow:0 0 0 3px rgba(212,168,67,.15)}
.btn-login{
  width:100%;background:linear-gradient(135deg,#D4A843,#b8902e);
  border:none;border-radius:12px;color:#000;
  padding:14px;font-size:16px;font-weight:700;
  font-family:'Cairo',sans-serif;cursor:pointer;
  transition:opacity .2s,transform .1s;margin-top:8px
}
.btn-login:hover{opacity:.9}
.btn-login:active{transform:scale(.98)}
.error{
  background:#2a0a0a;border:1px solid #c0392b40;
  border-radius:10px;padding:12px 14px;
  color:#e74c3c;font-size:13px;margin-top:14px;
  display:none;text-align:center
}
.footer{text-align:center;margin-top:24px;color:#444;font-size:12px}
.footer span{color:#D4A84380}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}
.shake{animation:shake .3s ease}
</style>
</head>
<body>
<div class="card" id="card">
  <div class="logo">
    <span class="icon">ğŸ¥–</span>
    <h1>CRMB</h1>
    <p>Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø®Ø§Ø¨Ø² â€” Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ</p>
  </div>
  <div class="field">
    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
    <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" autocomplete="username" autofocus>
  </div>
  <div class="field">
    <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
    <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" autocomplete="current-password" onkeydown="if(event.key==='Enter')login()">
  </div>
  <button class="btn-login" onclick="login()" id="loginBtn">Ø¯Ø®ÙˆÙ„ â†</button>
  <div class="error" id="errMsg"></div>
  <div class="footer">
    <span>CRMB v2.0</span> â€” Ù…Ø­Ù…ÙŠ Ø¨ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ğŸ”
  </div>
</div>

<script>
async function login() {
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;
  const btn = document.getElementById('loginBtn');
  const err = document.getElementById('errMsg');
  if (!username || !password) {
    showError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
    return;
  }
  btn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
  btn.disabled = true;
  try {
    const res = await fetch('/api/login', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ username, password })
    });
    const data = await res.json();
    if (data.ok) {
      btn.textContent = 'âœ… ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„...';
      window.location.href = '/';
    } else {
      showError(data.error || 'Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
      btn.textContent = 'Ø¯Ø®ÙˆÙ„ â†';
      btn.disabled = false;
    }
  } catch {
    showError('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
    btn.textContent = 'Ø¯Ø®ÙˆÙ„ â†';
    btn.disabled = false;
  }
}
function showError(msg) {
  const err = document.getElementById('errMsg');
  err.textContent = msg;
  err.style.display = 'block';
  document.getElementById('card').classList.add('shake');
  setTimeout(() => document.getElementById('card').classList.remove('shake'), 300);
}
</script>
</body>
</html>
